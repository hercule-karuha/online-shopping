import{H as z,I as b,J as N,L as q,d as R,a4 as we,a5 as ce,a6 as Ee,a7 as pe,R as fe,a8 as Se,W as se,o as v,c as E,j as y,a as e,i as O,n as A,U,t as K,q as $,C as L,m as C,a9 as Ce,E as I,N as H,a2 as me,aa as S,r as ee,F as Pe,p as Re,k as ve,s as M,l as T,ab as Ue,ac as Fe,ad as Le,ae as Te,af as De,K as Be,D as Y,ag as ae,B as Q,Y as Oe,f as Ne,S as je,ah as Ie,ai as oe,aj as ne,_ as Ae,g as qe,T as Me}from"./index-43945a83.js";import{t as te,i as ye,a as Z,g as ze,h as V,j as We,k as He,l as Ke,m as Ve}from"./request-d304319d.js";import{b as Xe}from"./tools-e8160517.js";import{c as re}from"./el-form-item-a39e9bf3.js";import{i as Je}from"./el-popper-a281cd70.js";const Ge=z({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:b(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:b([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:b(Function),default:n=>`${n}%`}}),Ye=["aria-valuenow"],Qe={viewBox:"0 0 100 100"},Ze=["d","stroke","stroke-width"],xe=["d","stroke","opacity","stroke-linecap","stroke-width"],et={key:0},tt=N({name:"ElProgress"}),st=N({...tt,props:Ge,setup(n){const s=n,o={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},a=q("progress"),p=R(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:D(s.percentage)})),m=R(()=>(s.strokeWidth/s.width*100).toFixed(1)),d=R(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(m.value)/2}`,10):0),w=R(()=>{const l=d.value,F=s.type==="dashboard";return`
          M 50 50
          m 0 ${F?"":"-"}${l}
          a ${l} ${l} 0 1 1 0 ${F?"-":""}${l*2}
          a ${l} ${l} 0 1 1 0 ${F?"":"-"}${l*2}
          `}),k=R(()=>2*Math.PI*d.value),c=R(()=>s.type==="dashboard"?.75:1),_=R(()=>`${-1*k.value*(1-c.value)/2}px`),h=R(()=>({strokeDasharray:`${k.value*c.value}px, ${k.value}px`,strokeDashoffset:_.value})),r=R(()=>({strokeDasharray:`${k.value*c.value*(s.percentage/100)}px, ${k.value}px`,strokeDashoffset:_.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),u=R(()=>{let l;return s.color?l=D(s.percentage):l=o[s.status]||o.default,l}),t=R(()=>s.status==="warning"?we:s.type==="line"?s.status==="success"?ce:Ee:s.status==="success"?pe:fe),f=R(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),g=R(()=>s.format(s.percentage));function i(l){const F=100/l.length;return l.map((P,j)=>se(P)?{color:P,percentage:(j+1)*F}:P).sort((P,j)=>P.percentage-j.percentage)}const D=l=>{var F;const{color:B}=s;if(Se(B))return B(l);if(se(B))return B;{const P=i(B);for(const j of P)if(j.percentage>l)return j.color;return(F=P[P.length-1])==null?void 0:F.color}};return(l,F)=>(v(),E("div",{class:y([e(a).b(),e(a).m(l.type),e(a).is(l.status),{[e(a).m("without-text")]:!l.showText,[e(a).m("text-inside")]:l.textInside}]),role:"progressbar","aria-valuenow":l.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[l.type==="line"?(v(),E("div",{key:0,class:y(e(a).b("bar"))},[O("div",{class:y(e(a).be("bar","outer")),style:A({height:`${l.strokeWidth}px`})},[O("div",{class:y([e(a).be("bar","inner"),{[e(a).bem("bar","inner","indeterminate")]:l.indeterminate},{[e(a).bem("bar","inner","striped")]:l.striped},{[e(a).bem("bar","inner","striped-flow")]:l.stripedFlow}]),style:A(e(p))},[(l.showText||l.$slots.default)&&l.textInside?(v(),E("div",{key:0,class:y(e(a).be("bar","innerText"))},[U(l.$slots,"default",{percentage:l.percentage},()=>[O("span",null,K(e(g)),1)])],2)):$("v-if",!0)],6)],6)],2)):(v(),E("div",{key:1,class:y(e(a).b("circle")),style:A({height:`${l.width}px`,width:`${l.width}px`})},[(v(),E("svg",Qe,[O("path",{class:y(e(a).be("circle","track")),d:e(w),stroke:`var(${e(a).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(m),fill:"none",style:A(e(h))},null,14,Ze),O("path",{class:y(e(a).be("circle","path")),d:e(w),stroke:e(u),fill:"none",opacity:l.percentage?1:0,"stroke-linecap":l.strokeLinecap,"stroke-width":e(m),style:A(e(r))},null,14,xe)]))],6)),(l.showText||l.$slots.default)&&!l.textInside?(v(),E("div",{key:2,class:y(e(a).e("text")),style:A({fontSize:`${e(f)}px`})},[U(l.$slots,"default",{percentage:l.percentage},()=>[l.status?(v(),L(e(I),{key:1},{default:C(()=>[(v(),L(Ce(e(t))))]),_:1})):(v(),E("span",et,K(e(g)),1))])],6)):$("v-if",!0)],10,Ye))}});var at=H(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const ot=me(at),ge=Symbol("uploadContextKey"),nt="ElUpload";class rt extends Error{constructor(s,o,a,p){super(s),this.name="UploadAjaxError",this.status=o,this.method=a,this.url=p}}function le(n,s,o){let a;return o.response?a=`${o.response.error||o.response}`:o.responseText?a=`${o.responseText}`:a=`fail to ${s.method} ${n} ${o.status}`,new rt(a,o.status,s.method,n)}function lt(n){const s=n.responseText||n.response;if(!s)return s;try{return JSON.parse(s)}catch{return s}}const it=n=>{typeof XMLHttpRequest>"u"&&te(nt,"XMLHttpRequest is undefined");const s=new XMLHttpRequest,o=n.action;s.upload&&s.upload.addEventListener("progress",m=>{const d=m;d.percent=m.total>0?m.loaded/m.total*100:0,n.onProgress(d)});const a=new FormData;if(n.data)for(const[m,d]of Object.entries(n.data))Array.isArray(d)?a.append(m,...d):a.append(m,d);a.append(n.filename,n.file,n.file.name),s.addEventListener("error",()=>{n.onError(le(o,n,s))}),s.addEventListener("load",()=>{if(s.status<200||s.status>=300)return n.onError(le(o,n,s));n.onSuccess(lt(s))}),s.open(n.method,o,!0),n.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0);const p=n.headers||{};if(p instanceof Headers)p.forEach((m,d)=>s.setRequestHeader(d,m));else for(const[m,d]of Object.entries(p))ye(d)||s.setRequestHeader(m,String(d));return s.send(a),s},he=["text","picture","picture-card"];let ut=1;const x=()=>Date.now()+ut++,be=z({action:{type:String,default:"#"},headers:{type:b(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>Z({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:b(Array),default:()=>Z([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:he,default:"text"},httpRequest:{type:b(Function),default:it},disabled:Boolean,limit:Number}),dt=z({...be,beforeUpload:{type:b(Function),default:S},beforeRemove:{type:b(Function)},onRemove:{type:b(Function),default:S},onChange:{type:b(Function),default:S},onPreview:{type:b(Function),default:S},onSuccess:{type:b(Function),default:S},onProgress:{type:b(Function),default:S},onError:{type:b(Function),default:S},onExceed:{type:b(Function),default:S}}),ct=z({files:{type:b(Array),default:()=>Z([])},disabled:{type:Boolean,default:!1},handlePreview:{type:b(Function),default:S},listType:{type:String,values:he,default:"text"}}),pt={remove:n=>!!n},ft=["onKeydown"],mt=["src"],vt=["onClick"],yt=["onClick"],gt=["onClick"],ht=N({name:"ElUploadList"}),bt=N({...ht,props:ct,emits:pt,setup(n,{emit:s}){const{t:o}=ze(),a=q("upload"),p=q("icon"),m=q("list"),d=V(),w=ee(!1),k=c=>{s("remove",c)};return(c,_)=>(v(),L(Te,{tag:"ul",class:y([e(a).b("list"),e(a).bm("list",c.listType),e(a).is("disabled",e(d))]),name:e(m).b()},{default:C(()=>[(v(!0),E(Pe,null,Re(c.files,h=>(v(),E("li",{key:h.uid||h.name,class:y([e(a).be("list","item"),e(a).is(h.status),{focusing:w.value}]),tabindex:"0",onKeydown:ve(r=>!e(d)&&k(h),["delete"]),onFocus:_[0]||(_[0]=r=>w.value=!0),onBlur:_[1]||(_[1]=r=>w.value=!1),onClick:_[2]||(_[2]=r=>w.value=!1)},[U(c.$slots,"default",{file:h},()=>[c.listType==="picture"||h.status!=="uploading"&&c.listType==="picture-card"?(v(),E("img",{key:0,class:y(e(a).be("list","item-thumbnail")),src:h.url,alt:""},null,10,mt)):$("v-if",!0),h.status==="uploading"||c.listType!=="picture-card"?(v(),E("div",{key:1,class:y(e(a).be("list","item-info"))},[O("a",{class:y(e(a).be("list","item-name")),onClick:M(r=>c.handlePreview(h),["prevent"])},[T(e(I),{class:y(e(p).m("document"))},{default:C(()=>[T(e(Ue))]),_:1},8,["class"]),O("span",{class:y(e(a).be("list","item-file-name"))},K(h.name),3)],10,vt),h.status==="uploading"?(v(),L(e(ot),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:A(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):$("v-if",!0)],2)):$("v-if",!0),O("label",{class:y(e(a).be("list","item-status-label"))},[c.listType==="text"?(v(),L(e(I),{key:0,class:y([e(p).m("upload-success"),e(p).m("circle-check")])},{default:C(()=>[T(e(ce))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(v(),L(e(I),{key:1,class:y([e(p).m("upload-success"),e(p).m("check")])},{default:C(()=>[T(e(pe))]),_:1},8,["class"])):$("v-if",!0)],2),e(d)?$("v-if",!0):(v(),L(e(I),{key:2,class:y(e(p).m("close")),onClick:r=>k(h)},{default:C(()=>[T(e(fe))]),_:2},1032,["class","onClick"])),$(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),$(" This is a bug which needs to be fixed "),$(" TODO: Fix the incorrect navigation interaction "),e(d)?$("v-if",!0):(v(),E("i",{key:3,class:y(e(p).m("close-tip"))},K(e(o)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(v(),E("span",{key:4,class:y(e(a).be("list","item-actions"))},[O("span",{class:y(e(a).be("list","item-preview")),onClick:r=>c.handlePreview(h)},[T(e(I),{class:y(e(p).m("zoom-in"))},{default:C(()=>[T(e(Fe))]),_:1},8,["class"])],10,yt),e(d)?$("v-if",!0):(v(),E("span",{key:0,class:y(e(a).be("list","item-delete")),onClick:r=>k(h)},[T(e(I),{class:y(e(p).m("delete"))},{default:C(()=>[T(e(Le))]),_:1},8,["class"])],10,gt))],2)):$("v-if",!0)])],42,ft))),128)),U(c.$slots,"append")]),_:3},8,["class","name"]))}});var ie=H(bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const kt=z({disabled:{type:Boolean,default:!1}}),$t={file:n=>De(n)},_t=["onDrop","onDragover"],ke="ElUploadDrag",wt=N({name:ke}),Et=N({...wt,props:kt,emits:$t,setup(n,{emit:s}){const o=Be(ge);o||te(ke,"usage: <el-upload><el-upload-dragger /></el-upload>");const a=q("upload"),p=ee(!1),m=V(),d=k=>{if(m.value)return;p.value=!1,k.stopPropagation();const c=Array.from(k.dataTransfer.files),_=o.accept.value;if(!_){s("file",c);return}const h=c.filter(r=>{const{type:u,name:t}=r,f=t.includes(".")?`.${t.split(".").pop()}`:"",g=u.replace(/\/.*$/,"");return _.split(",").map(i=>i.trim()).filter(i=>i).some(i=>i.startsWith(".")?f===i:/\/\*$/.test(i)?g===i.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(i)?u===i:!1)});s("file",h)},w=()=>{m.value||(p.value=!0)};return(k,c)=>(v(),E("div",{class:y([e(a).b("dragger"),e(a).is("dragover",p.value)]),onDrop:M(d,["prevent"]),onDragover:M(w,["prevent"]),onDragleave:c[0]||(c[0]=M(_=>p.value=!1,["prevent"]))},[U(k.$slots,"default")],42,_t))}});var St=H(Et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const Ct=z({...be,beforeUpload:{type:b(Function),default:S},onRemove:{type:b(Function),default:S},onStart:{type:b(Function),default:S},onSuccess:{type:b(Function),default:S},onProgress:{type:b(Function),default:S},onError:{type:b(Function),default:S},onExceed:{type:b(Function),default:S}}),Pt=["onKeydown"],Rt=["name","multiple","accept"],Ut=N({name:"ElUploadContent",inheritAttrs:!1}),Ft=N({...Ut,props:Ct,setup(n,{expose:s}){const o=n,a=q("upload"),p=V(),m=Y({}),d=Y(),w=t=>{if(t.length===0)return;const{autoUpload:f,limit:g,fileList:i,multiple:D,onStart:l,onExceed:F}=o;if(g&&i.length+t.length>g){F(t,i);return}D||(t=t.slice(0,1));for(const B of t){const P=B;P.uid=x(),l(P),f&&k(P)}},k=async t=>{if(d.value.value="",!o.beforeUpload)return c(t);let f,g={};try{const D=o.data,l=o.beforeUpload(t);g=ae(o.data)?re(o.data):o.data,f=await l,ae(o.data)&&Je(D,g)&&(g=re(o.data))}catch{f=!1}if(f===!1){o.onRemove(t);return}let i=t;f instanceof Blob&&(f instanceof File?i=f:i=new File([f],t.name,{type:t.type})),c(Object.assign(i,{uid:t.uid}),g)},c=(t,f)=>{const{headers:g,data:i,method:D,withCredentials:l,name:F,action:B,onProgress:P,onSuccess:j,onError:$e,httpRequest:_e}=o,{uid:X}=t,J={headers:g||{},withCredentials:l,file:t,data:f??i,method:D,filename:F,action:B,onProgress:W=>{P(W,t)},onSuccess:W=>{j(W,t),delete m.value[X]},onError:W=>{$e(W,t),delete m.value[X]}},G=_e(J);m.value[X]=G,G instanceof Promise&&G.then(J.onSuccess,J.onError)},_=t=>{const f=t.target.files;f&&w(Array.from(f))},h=()=>{p.value||(d.value.value="",d.value.click())},r=()=>{h()};return s({abort:t=>{We(m.value).filter(t?([g])=>String(t.uid)===g:()=>!0).forEach(([g,i])=>{i instanceof XMLHttpRequest&&i.abort(),delete m.value[g]})},upload:k}),(t,f)=>(v(),E("div",{class:y([e(a).b(),e(a).m(t.listType),e(a).is("drag",t.drag)]),tabindex:"0",onClick:h,onKeydown:ve(M(r,["self"]),["enter","space"])},[t.drag?(v(),L(St,{key:0,disabled:e(p),onFile:w},{default:C(()=>[U(t.$slots,"default")]),_:3},8,["disabled"])):U(t.$slots,"default",{key:1}),O("input",{ref_key:"inputRef",ref:d,class:y(e(a).e("input")),name:t.name,multiple:t.multiple,accept:t.accept,type:"file",onChange:_,onClick:f[0]||(f[0]=M(()=>{},["stop"]))},null,42,Rt)],42,Pt))}});var ue=H(Ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const de="ElUpload",Lt=n=>{var s;(s=n.url)!=null&&s.startsWith("blob:")&&URL.revokeObjectURL(n.url)},Tt=(n,s)=>{const o=He(n,"fileList",void 0,{passive:!0}),a=r=>o.value.find(u=>u.uid===r.uid);function p(r){var u;(u=s.value)==null||u.abort(r)}function m(r=["ready","uploading","success","fail"]){o.value=o.value.filter(u=>!r.includes(u.status))}const d=(r,u)=>{const t=a(u);t&&(console.error(r),t.status="fail",o.value.splice(o.value.indexOf(t),1),n.onError(r,t,o.value),n.onChange(t,o.value))},w=(r,u)=>{const t=a(u);t&&(n.onProgress(r,t,o.value),t.status="uploading",t.percentage=Math.round(r.percent))},k=(r,u)=>{const t=a(u);t&&(t.status="success",t.response=r,n.onSuccess(r,t,o.value),n.onChange(t,o.value))},c=r=>{ye(r.uid)&&(r.uid=x());const u={name:r.name,percentage:0,status:"ready",size:r.size,raw:r,uid:r.uid};if(n.listType==="picture-card"||n.listType==="picture")try{u.url=URL.createObjectURL(r)}catch(t){Ke(de,t.message),n.onError(t,u,o.value)}o.value=[...o.value,u],n.onChange(u,o.value)},_=async r=>{const u=r instanceof File?a(r):r;u||te(de,"file to be removed not found");const t=f=>{p(f);const g=o.value;g.splice(g.indexOf(f),1),n.onRemove(f,g),Lt(f)};n.beforeRemove?await n.beforeRemove(u,o.value)!==!1&&t(u):t(u)};function h(){o.value.filter(({status:r})=>r==="ready").forEach(({raw:r})=>{var u;return r&&((u=s.value)==null?void 0:u.upload(r))})}return Q(()=>n.listType,r=>{r!=="picture-card"&&r!=="picture"||(o.value=o.value.map(u=>{const{raw:t,url:f}=u;if(!f&&t)try{u.url=URL.createObjectURL(t)}catch(g){n.onError(g,u,o.value)}return u}))}),Q(o,r=>{for(const u of r)u.uid||(u.uid=x()),u.status||(u.status="success")},{immediate:!0,deep:!0}),{uploadFiles:o,abort:p,clearFiles:m,handleError:d,handleProgress:w,handleStart:c,handleSuccess:k,handleRemove:_,submit:h}},Dt=N({name:"ElUpload"}),Bt=N({...Dt,props:dt,setup(n,{expose:s}){const o=n,a=Oe(),p=V(),m=Y(),{abort:d,submit:w,clearFiles:k,uploadFiles:c,handleStart:_,handleError:h,handleRemove:r,handleSuccess:u,handleProgress:t}=Tt(o,m),f=R(()=>o.listType==="picture-card"),g=R(()=>({...o,fileList:c.value,onStart:_,onProgress:t,onSuccess:u,onError:h,onRemove:r}));return Ne(()=>{c.value.forEach(({url:i})=>{i!=null&&i.startsWith("blob:")&&URL.revokeObjectURL(i)})}),je(ge,{accept:Ie(o,"accept")}),s({abort:d,submit:w,clearFiles:k,handleStart:_,handleRemove:r}),(i,D)=>(v(),E("div",null,[e(f)&&i.showFileList?(v(),L(ie,{key:0,disabled:e(p),"list-type":i.listType,files:e(c),"handle-preview":i.onPreview,onRemove:e(r)},oe({append:C(()=>[T(ue,ne({ref_key:"uploadRef",ref:m},e(g)),{default:C(()=>[e(a).trigger?U(i.$slots,"trigger",{key:0}):$("v-if",!0),!e(a).trigger&&e(a).default?U(i.$slots,"default",{key:1}):$("v-if",!0)]),_:3},16)]),_:2},[i.$slots.file?{name:"default",fn:C(({file:l})=>[U(i.$slots,"file",{file:l})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):$("v-if",!0),!e(f)||e(f)&&!i.showFileList?(v(),L(ue,ne({key:1,ref_key:"uploadRef",ref:m},e(g)),{default:C(()=>[e(a).trigger?U(i.$slots,"trigger",{key:0}):$("v-if",!0),!e(a).trigger&&e(a).default?U(i.$slots,"default",{key:1}):$("v-if",!0)]),_:3},16)):$("v-if",!0),i.$slots.trigger?U(i.$slots,"default",{key:2}):$("v-if",!0),U(i.$slots,"tip"),!e(f)&&i.showFileList?(v(),L(ie,{key:3,disabled:e(p),"list-type":i.listType,files:e(c),"handle-preview":i.onPreview,onRemove:e(r)},oe({_:2},[i.$slots.file?{name:"default",fn:C(({file:l})=>[U(i.$slots,"file",{file:l})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):$("v-if",!0)]))}});var Ot=H(Bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Nt=me(Ot);const jt=["src"],It={__name:"CoverUpload",props:{imageUrl:{type:String,default:""},update:{type:Boolean,default:!1}},emits:["uploadImage"],setup(n,{emit:s}){const o=n,{proxy:a}=qe(),p=ee("");Q(()=>o.imageUrl,d=>{p.value=d},{immediate:!0});const m=async d=>{if(console.log(d),d.size>a.globalInfo.maxFileSize){Ve.error("文件大小超过限制");return}await Xe(d).then(w=>{p.value=w}),s("uploadImage",d)};return(d,w)=>{const k=I,c=Nt;return v(),L(c,{class:"avatar-uploader","show-file-list":!1,"before-upload":m},{default:C(()=>[p.value?(v(),E("img",{key:0,src:p.value,class:"avatar"},null,8,jt)):(v(),L(k,{key:1,class:"avatar-uploader-icon"},{default:C(()=>[T(e(Me))]),_:1}))]),_:1})}}},Ht=Ae(It,[["__scopeId","data-v-dac9a0a7"]]);export{Nt as E,Ht as _};
