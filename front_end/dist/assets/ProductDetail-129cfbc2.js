import{_ as E,g as U,A,r as n,B as w,u as B,o as m,c as v,i as s,a as c,t as o,l as f,n as D,m as k,F as L,p as T,y as z,z as F}from"./index-43945a83.js";import{E as R,a as j}from"./el-tab-pane-f1874cb0.js";import{E as q}from"./el-input-number-57ff7060.js";import"./el-input-853da7da.js";import{a as J}from"./product-252d41f2.js";import{g as O}from"./store-a6f281e4.js";import{p as $}from"./tools-e8160517.js";import{u as G,a as H}from"./purchaseList-c3137989.js";import{m as K}from"./request-d304319d.js";import"./element-china-area-data-7e4514d6.js";const d=i=>(z("data-v-895a8aff"),i=i(),F(),i),M={class:"content"},Q={class:"cover"},W=["src"],X={class:"purchase-info"},Y={class:"name"},Z={class:"sales info-item"},ss=d(()=>s("span",{class:"label"},"销量",-1)),es={class:"info"},ts={class:"price info-item"},as=d(()=>s("span",{class:"label"},"价格",-1)),os={class:"info"},ls={class:"description info-item"},ns=d(()=>s("span",{class:"label"},"描述",-1)),cs={class:"info"},ds={class:"address info-item"},is=d(()=>s("span",{class:"label"},"发货",-1)),rs={class:"info"},us={class:"stock info-item"},_s=d(()=>s("span",{class:"label"},"库存",-1)),ps={class:"info"},ms={class:"number-select"},vs={class:"bg"},fs={class:"store-cover"},hs=["src"],gs={class:"store-info"},Is={class:"detail"},bs={class:"detail-images"},ks=["src"],Cs={__name:"ProductDetail",setup(i){const C=G(),{proxy:r}=U(),S=A(),h=n([]),g=n({});w(()=>S.params.id,a=>{a&&J(a).then(t=>{e.value=t.data,h.value=t.data.detailImages.split(",");const _=JSON.parse(t.data.address);e.value.stock=Number.parseInt(e.value.stock),e.value.address=$(_.codeArr).join("  ")+_.detailAddress,O(t.data.storeId).then(p=>{g.value=p.data})})},{immediate:!0});const I=B(),e=n({}),y=a=>{console.log(a)},b=n("details"),u=n(1),x=()=>{C.add({productId:e.value.productId,num:u.value,price:e.value.price,name:e.value.name}),I.push("/purchase")},V=async()=>{let a={list:[{productId:e.value.productId,num:u.value.toString()}]};await H(a)&&K.success("添加成功")};return(a,t)=>{const _=q,p=j,N=R;return m(),v("div",M,[s("main",null,[s("div",Q,[s("img",{src:e.value.productId?c(r).globalInfo.productCoverUrl+e.value.productId:"",alt:""},null,8,W)]),s("div",X,[s("div",Y,o(e.value.productName),1),s("div",Z,[ss,s("span",es,o(e.value.sales),1)]),s("div",ts,[as,s("span",os,"¥"+o(e.value.price),1)]),s("div",ls,[ns,s("span",cs,o(e.value.description),1)]),s("div",ds,[is,s("span",rs,o(e.value.address),1)]),s("div",us,[_s,s("span",ps,o(e.value.stock),1)]),s("div",ms,[f(_,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),min:1,max:e.value.stock},null,8,["modelValue","max"])]),s("div",{class:"purchase"},[s("button",{onClick:x},"立即购买"),s("button",{onClick:V},"加入购物车")])])]),s("div",{class:"store",style:D({"background-image":"url("+c(r).globalInfo.storeCoverUrl+e.value.storeId+")"})},[s("div",vs,[s("div",fs,[s("img",{src:e.value.storeId?c(r).globalInfo.storeCoverUrl+e.value.storeId:"",alt:""},null,8,hs)]),s("div",gs,o(g.value.name),1),s("button",{onClick:t[1]||(t[1]=l=>c(I).push("/store/detail/"+e.value.storeId))},"进店逛逛")])],4),s("div",Is,[f(N,{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=l=>b.value=l),class:"demo-tabs",onTabClick:y},{default:k(()=>[f(p,{label:"商品详情",name:"details"},{default:k(()=>[s("div",bs,[(m(!0),v(L,null,T(h.value,(l,P)=>(m(),v("div",{key:P,class:"detail-image"},[s("img",{src:c(r).globalInfo.imgUrl+l,alt:""},null,8,ks)]))),128))])]),_:1})]),_:1},8,["modelValue"])])])}}},Bs=E(Cs,[["__scopeId","data-v-895a8aff"]]);export{Bs as default};
